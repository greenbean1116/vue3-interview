<template>
  <div class="child-component">
    <h4>å­å…ƒä»¶</h4>
    <p>å¾çˆ¶å…ƒä»¶æ¥æ”¶çš„ count: {{ count }}</p>
    <p>å­å…ƒä»¶è‡ªå·±çš„ç‹€æ…‹: {{ childState }}</p>
    <button @click="childState++">å¢åŠ å­å…ƒä»¶ç‹€æ…‹</button>
  </div>
</template>

<script setup lang="ts">
import {
  ref,
  onBeforeMount,
  onMounted,
  onBeforeUpdate,
  onUpdated,
  onBeforeUnmount,
  onUnmounted,
  watch,
} from 'vue'

const props = defineProps<{
  count: number
}>()

const childState = ref(0)

console.log('ğŸ”µ å­å…ƒä»¶ setup')

onBeforeMount(() => {
  console.log('ğŸŸ¡ å­å…ƒä»¶ onBeforeMount')
})

onMounted(() => {
  console.log('ğŸŸ¢ å­å…ƒä»¶ onMounted')
})

onBeforeUpdate(() => {
  console.log('ğŸŸ  å­å…ƒä»¶ onBeforeUpdate')
})

onUpdated(() => {
  console.log('ğŸ”´ å­å…ƒä»¶ onUpdated')
})

onBeforeUnmount(() => {
  console.log('ğŸŸ£ å­å…ƒä»¶ onBeforeUnmount')
})

onUnmounted(() => {
  console.log('âš« å­å…ƒä»¶ onUnmounted')
})

watch(
  () => props.count,
  (newVal) => {
    console.log(`ğŸ‘€ å­å…ƒä»¶ç›£è½åˆ° props.count è®ŠåŒ–: ${newVal}`)
  },
)
</script>

<style scoped>
.child-component {
  margin-top: 15px;
  padding: 15px;
  background: #e8f4f8;
  border-radius: 4px;
  border: 2px dashed #4a90e2;
}
</style>
